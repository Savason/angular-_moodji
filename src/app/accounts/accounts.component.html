<div class="container accounts_wrapper">
  <a [routerLink]="['role_table']">RMS</a>
  <a class="create_circle_btn d-flex justify-content-center align-items-center"
     tooltip="Create new user" (click)="createNewUserModal()">
    <fa-icon [icon]="addUser"></fa-icon>
  </a>
  <ngx-datatable
    class="material"
    [rows]="rows|async"
    [headerHeight]="50"
    [footerHeight]="50"
    [rowHeight]="50"
    [columnMode]="'force'"
    [externalPaging]="true"
    [offset]="page.pageNumber"
    [limit]="page.size"
    [count]="accountService.totalUserCount"
    (page)='setPage($event)'
  >
    <ngx-datatable-column name="Name">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span>
          {{row.name}}
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Email">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span>
          {{row.email}}
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Client Role">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <span class="role_title">
          {{row.role_title}}
        </span>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Status" [sortable]="false">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <ui-switch tooltip="client status" [ngModel]="row.enabled"
                   (change)="onChangeStatus(row.enabled,row.id)"></ui-switch>
      </ng-template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Actions" [sortable]="false">
      <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
        <a class="table_action_btn" routerLink="{{row.id}}"
           tooltip="Details"
        >
          <fa-icon [icon]="faInfo"></fa-icon>
        </a>
        <a class="table_action_btn" (click)="editCurrentUserModal(row)"
           tooltip="Edit {{row.name}}"
           container="body"
        >
          <fa-icon [icon]="faEdit"></fa-icon>
        </a>
        <a class="table_action_btn" (click)="openModal(template,row.id)"
           tooltip="Delete {{row.name}}"
           container="body"
        >
          <fa-icon [icon]="faDelete"></fa-icon>
        </a>
      </ng-template>
    </ngx-datatable-column>
  </ngx-datatable>
  <ng-template #template>
    <div class="modal-header">
      <h5 class="modal-title pull-left">Are you sure you want to delete user?</h5>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn" (click)="onDeleteUser()">Yes</button>
      <button type="button" class="btn" aria-label="Close" (click)="modalRef.hide()">Cancel</button>
    </div>
  </ng-template>
</div>

